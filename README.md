# üìò shared_ptr lesson (Shape/Texture 1:1)

–ü—Ä–æ–µ–∫—Ç ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è `std::shared_ptr` –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ `Shape` ‚Üî `Texture`:
- –∫—Ç–æ –≤–ª–∞–¥–µ–µ—Ç –æ–±—ä–µ–∫—Ç–æ–º
- –∫–æ–≥–¥–∞ —Ä–∞—Å—Ç—ë—Ç `use_count`
- –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è
- –ø–æ—á–µ–º—É ¬´–≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏¬ª —Å—á—ë—Ç—á–∏–∫ –±–æ–ª—å—à–µ (–ø–µ—Ä–µ–¥–∞—á–∞ `shared_ptr` –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é)

---

## ‚úÖ –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å (Windows / g++)

> –í–∞–∂–Ω–æ: —á—Ç–æ–±—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å emoji –∏ –ø—Å–µ–≤–¥–æ–≥—Ä–∞—Ñ–∏–∫–∞ ‚Äî —Å—Ç–∞–≤–∏–º UTF-8.

```bat
chcp 65001
g++ -std=c++17 -O2 -Wall -Wextra -pedantic ^
  main.cpp console_color.cpp texture.cpp shape.cpp canvas.cpp ^
  textures_factory.cpp dashed_border.cpp utf8_table.cpp lesson_print.cpp ^
  -o demo.exe

demo.exe
````

---

## ‚ùó –ü–æ—á–µ–º—É ¬´–≤ README –≤—Å—ë —Ä—É—à–∏—Ç—Å—è¬ª

GitHub Markdown **–ª–æ–º–∞–µ—Ç –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ**, –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ –≤ code-block.

‚úÖ –†–µ—à–µ–Ω–∏–µ: **–≤–µ—Å—å –≤—ã–≤–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤—Å—Ç–∞–≤–ª—è–π –≤–Ω—É—Ç—Ä—å**
—Ç—Ä—ë—Ö –æ–±—Ä–∞—Ç–Ω—ã—Ö –∫–∞–≤—ã—á–µ–∫:

````
```text
...—Ç—É—Ç –≤—ã–≤–æ–¥...
````

````

–ù–∏–∂–µ —è —É–∂–µ –≤—Å—Ç–∞–≤–∏–ª –≤—ã–≤–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî **–Ω–∏—á–µ–≥–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –ª–æ–º–∞—Ç—å—Å—è**.

---

## üßæ –ü–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã (1:1)

```text
Microsoft Windows [Version 10.0.26200.7623]
(c) –ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –ú–∞–π–∫—Ä–æ—Å–æ—Ñ—Ç (Microsoft Corporation). –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

C:\...\–£–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏\–£–º–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å shared_ptr\shared_ptr_lesson>chcp 65001
Active code page: 65001

C:\...\–£–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏\–£–º–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å shared_ptr\shared_ptr_lesson>g++ -std=c++17 -O2 -Wall -Wextra -pedantic ^
More?   main.cpp console_color.cpp texture.cpp shape.cpp canvas.cpp ^
More?   textures_factory.cpp dashed_border.cpp utf8_table.cpp lesson_print.cpp ^
More?   -o demo.exe

C:\...\–£–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏\–£–º–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å shared_ptr\shared_ptr_lesson>demo.exe

=========================================================================
üìò shared_ptr –£–†–û–ö: Robot/Charger == Shape/Texture (1:1)
=========================================================================

=========================================================================
üßæ –õ–ï–ì–ï–ù–î–ê –ü–ò–ö–°–ï–õ–ï–ô –¢–ï–ö–°–¢–£–† (—á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∫–∞–∂–¥–∞—è –±—É–∫–≤–∞)
=========================================================================
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ö–æ–¥ ‚îÇ –ó–Ω–∞—á–µ–Ω–∏–µ                                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ B   ‚îÇ üåå –ù–µ–±–æ (sky)                                 ‚îÇ
‚îÇ Y   ‚îÇ ‚òÄÔ∏è  –°–æ–ª–Ω—Ü–µ (sun)                              ‚îÇ
‚îÇ G   ‚îÇ üü© –¢—Ä–∞–≤–∞ (grass)                              ‚îÇ
‚îÇ O   ‚îÇ üß± –°—Ç–µ–Ω—ã –¥–æ–º–∞ (walls)                         ‚îÇ
‚îÇ W   ‚îÇ ‚¨õ –ö—Ä—ã—à–∞ (roof)                               ‚îÇ
‚îÇ C   ‚îÇ ü™ü –û–∫–Ω–æ (window)                              ‚îÇ
‚îÇ .   ‚îÇ üü£ –í—ã—Ö–æ–¥ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Ç–µ–∫—Å—Ç—É—Ä—ã (outside texture)‚îÇ
‚îÇ ' ' ‚îÇ ‚¨ú –ü—É—Å—Ç–æ (–Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∏—Å—É–µ–º)                   ‚îÇ
‚îÇ R   ‚îÇ üî¥ –ö—Ä–∞—Å–Ω–∞—è –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è —Ä–∞–º–∫–∞ (source-mark)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üìå –í–∞–∂–Ω–æ:
  ‚Ä¢ HouseSceneTexture üå§Ô∏èüè† ‚Äî —ç—Ç–æ –û–î–ù–ê –∫–∞—Ä—Ç–∏–Ω–∫–∞-—Å—Ü–µ–Ω–∞: –Ω–µ–±–æ(B)+—Å–æ–ª–Ω—Ü–µ(Y)+–¥–æ–º(O/W/C)+—Ç—Ä–∞–≤–∞(G).
  ‚Ä¢ GreenFillTexture üü© ‚Äî —ç—Ç–æ –∑–∞–ª–∏–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–º 'G' –Ω–∞ –∫–∞–∂–¥–æ–º –ø–∏–∫—Å–µ–ª–µ (–¥–æ–∫–∞–∑—ã–≤–∞–µ–º –≤ –∫–æ–¥–µ).
üîπ –®–ê–ì 1: –°–æ–∑–¥–∞—ë–º —Ñ–∏–≥—É—Ä—ã (–¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü—ã)
üéØ –û–ñ–ò–î–ê–ï–ú: —Ñ–∏–≥—É—Ä—ã –ø–µ—Ä–µ–∂–∏–≤—É—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–ª–æ–∫.
--------------------------------------------------------------------------
üî∑/üü£‚úÖ Shape 'üî∑ Shape#1 (square)' created (this=0x3b433ff6f0)
üî∑/üü£‚úÖ Shape 'üü£ Shape#2 (ellipse)' created (this=0x3b433ff740)
‚úÖ –ü–û–õ–£–ß–ò–õ–ò: —Ñ–∏–≥—É—Ä—ã —Å–æ–∑–¥–∞–Ω—ã.
--------------------------------------------------------------------------

üîπ –®–ê–ì 2: –í–ù–£–¢–†–ï–ù–ù–ò–ô –ë–õ–û–ö: —Å–æ–∑–¥–∞—ë–º HouseScene/GreenFill/BlueUnused
üéØ –û–ñ–ò–î–ê–ï–ú:
   - BlueUnusedTexture üü¶ —É–º—Ä—ë—Ç –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –±–ª–æ–∫–∞ (–Ω–∏–∫–æ–º—É –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–∞)
   - üñºÔ∏è HouseSceneTexture üå§Ô∏èüè† / GreenFillTexture üü© –ù–ï —É–º—Ä—É—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏—Ö –±—É–¥—É—Ç –¥–µ—Ä–∂–∞—Ç—å —Ñ–∏–≥—É—Ä—ã
--------------------------------------------------------------------------
üß±‚úÖ Texture üñºÔ∏è HouseSceneTexture üå§Ô∏èüè† [—Å–æ–¥–µ—Ä–∂–∏—Ç –∏ –Ω–µ–±–æ, –∏ —Å–æ–ª–Ω—Ü–µ, –∏ –¥–æ–º, –∏ —Ç—Ä–∞–≤—É] created  (this=0x1d59a3d7dd0, size=40x20)
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ GreenFillTexture üü©: sample[0][0]='G' (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 'G')
üß±‚úÖ Texture GreenFillTexture üü© [–∑–∞–ª–∏–≤–∫–∞: –∫–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å = 'G'] created  (this=0x1d59a3d7ea0, size=40x20)
üß±‚úÖ Texture BlueUnusedTexture üü¶ [–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –¥–æ–ª–∂–Ω–∞ —É–º–µ—Ä–µ—Ç—å –ø–æ—Å–ª–µ –±–ª–æ–∫–∞] created  (this=0x1d59a3be780, size=40x20)

üìä –ü–æ—Å–ª–µ make_shared (–®–ê–ì 2)
+-------------------------------+------------------------+-------------+--------------------+
| Texture                       | –í–ª–∞–¥–µ–ª—å—Ü—ã              | use_count   | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π        |
+-------------------------------+------------------------+-------------+--------------------+
|  üñºÔ∏è HouseSceneTexture üå§Ô∏èüè†    | –ª–æ–∫–∞–ª—å–Ω–∞—è houseScene   | 1           | —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–∞—è   |
|  GreenFillTexture üü©          | –ª–æ–∫–∞–ª—å–Ω–∞—è greenFill    | 1           | —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–∞—è   |
|  BlueUnusedTexture üü¶         | –ª–æ–∫–∞–ª—å–Ω–∞—è blueUnused   | 1           | –±—É–¥–µ—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞   |
+-------------------------------+------------------------+-------------+--------------------+

üîπ –®–ê–ì 3: SetTexture (–∫–∞–∫ UseCharger)
üéØ –û–ñ–ò–î–ê–ï–ú:
   - use_count HouseScene/GreenFill —Å—Ç–∞–Ω–µ—Ç 2 (–ª–æ–∫–∞–ª—å–Ω–∞—è + —Ñ–∏–≥—É—Ä–∞)
   - BlueUnused –æ—Å—Ç–∞–Ω–µ—Ç—Å—è 1
--------------------------------------------------------------------------
   [–í–ù–£–¢–†–ò] üî∑ Shape#1 (square) tex.get()=0x1d59a3d7dd0 use_count=2 name="üñºÔ∏è HouseSceneTexture üå§Ô∏èüè† [—Å–æ–¥–µ—Ä–∂–∏—Ç –∏ –Ω–µ–±–æ, –∏ —Å–æ–ª–Ω—Ü–µ, –∏ –¥–æ–º, –∏ —Ç—Ä–∞–≤—É]"
   [–í–ù–£–¢–†–ò] üü£ Shape#2 (ellipse) tex.get()=0x1d59a3d7ea0 use_count=2 name="GreenFillTexture üü© [–∑–∞–ª–∏–≤–∫–∞: –∫–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å = 'G']"
üìå –ü–û–Ø–°–ù–ï–ù–ò–ï: —Å–µ–π—á–∞—Å use_count=2 –ø–æ—Ç–æ–º—É —á—Ç–æ:
   (1) –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (houseScene/greenFill) –≤–ª–∞–¥–µ–µ—Ç —Ç–µ–∫—Å—Ç—É—Ä–æ–π
   (2) –ø–æ–ª–µ Shape::texture_ –≤–Ω—É—Ç—Ä–∏ —Ñ–∏–≥—É—Ä—ã —Ç–æ–∂–µ –≤–ª–∞–¥–µ–µ—Ç —Ç–æ–π –∂–µ —Ç–µ–∫—Å—Ç—É—Ä–æ–π

üìä –ü–æ—Å–ª–µ SetTexture (–®–ê–ì 3)
+-------------------------------+--------------------------+-------------+--------------------------+
| Texture                       | –í–ª–∞–¥–µ–ª—å—Ü—ã                | use_count   | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π              |
+-------------------------------+--------------------------+-------------+--------------------------+
|  üñºÔ∏è HouseSceneTexture üå§Ô∏èüè†    | –ª–æ–∫–∞–ª—å–Ω–∞—è + üî∑ square    | 2           | –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–≤–∞–¥—Ä–∞—Ç–æ–º   |
|  GreenFillTexture üü©          | –ª–æ–∫–∞–ª—å–Ω–∞—è + üü£ ellipse   | 2           | –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–≤–∞–ª–æ–º      |
|  BlueUnusedTexture üü¶         | –ª–æ–∫–∞–ª—å–Ω–∞—è blueUnused     | 1           | –≤—Å—ë –µ—â—ë –ª–æ–∫–∞–ª—å–Ω–∞—è        |
+-------------------------------+--------------------------+-------------+--------------------------+
--------------------------------------------------------------------------
---- (–≤—ã—Ö–æ–¥–∏–º –∏–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–ª–æ–∫–∞) ----
üß±üí• Texture BlueUnusedTexture üü¶ [–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –¥–æ–ª–∂–Ω–∞ —É–º–µ—Ä–µ—Ç—å –ø–æ—Å–ª–µ –±–ª–æ–∫–∞] destroyed  (this=0x1d59a3be780)
--------------------------------------------------------------------------
‚úÖ –ü–û–õ–£–ß–ò–õ–ò: BlueUnusedTexture üü¶ —É–º–µ—Ä–ª–∞ (—É –Ω–µ—ë –±—ã–ª 1 –≤–ª–∞–¥–µ–ª–µ—Ü –≤ –±–ª–æ–∫–µ)

üìä –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ –±–ª–æ–∫–∞
+-------------------------------+--------------+-------------+---------------+
| Texture                       | –í–ª–∞–¥–µ–ª—å—Ü—ã    | use_count   | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π   |
+-------------------------------+--------------+-------------+---------------+
|  üñºÔ∏è HouseSceneTexture üå§Ô∏èüè†    | üî∑ square    | 1           | –∂–∏–≤–∞          |
|  GreenFillTexture üü©          | üü£ ellipse   | 1           | –∂–∏–≤–∞          |
|  BlueUnusedTexture üü¶         | ‚Äî            | 0           | —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞    |
+-------------------------------+--------------+-------------+---------------+

üîπ –®–ê–ì 5: üü£ ellipse.SetTexture(square.GetTexture())
üéØ –û–ñ–ò–î–ê–ï–ú:
   - GreenFillTexture üü© —É–º—Ä—ë—Ç (–µ—Å–ª–∏ –±–æ–ª—å—à–µ –Ω–∏–∫—Ç–æ –Ω–µ –¥–µ—Ä–∂–∏—Ç)
   - üñºÔ∏è HouseSceneTexture üå§Ô∏èüè† —Å—Ç–∞–Ω–µ—Ç –æ–±—â–µ–π —É üî∑ –∏ üü£
--------------------------------------------------------------------------
   [–í–ù–£–¢–†–ò] üü£ Shape#2 (ellipse) tex.get()=0x1d59a3d7dd0 use_count=2 name="üñºÔ∏è HouseSceneTexture üå§Ô∏èüè† [—Å–æ–¥–µ—Ä–∂–∏—Ç –∏ –Ω–µ–±–æ, –∏ —Å–æ–ª–Ω—Ü–µ, –∏ –¥–æ–º, –∏ —Ç—Ä–∞–≤—É]"
üß±üí• Texture GreenFillTexture üü© [–∑–∞–ª–∏–≤–∫–∞: –∫–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å = 'G'] destroyed  (this=0x1d59a3d7ea0)
üìå –ü–û–Ø–°–ù–ï–ù–ò–ï: –∑–¥–µ—Å—å use_count —Å–Ω–æ–≤–∞ —Å—Ç–∞–ª 2, –ø–æ—Ç–æ–º—É —á—Ç–æ:
   (1) üî∑ square –¥–µ—Ä–∂–∏—Ç HouseSceneTexture
   (2) üü£ ellipse —Ç–µ–ø–µ—Ä—å —Ç–æ–∂–µ –¥–µ—Ä–∂–∏—Ç HouseSceneTexture
   –ê GreenFillTexture üü© —É–º–µ—Ä–ª–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–µ—ë –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤.

üìä –ü–æ—Å–ª–µ ellipse.SetTexture(square.GetTexture())
+-------------------------------+--------------------------+-------------+-----------------------+
| Texture                       | –í–ª–∞–¥–µ–ª—å—Ü—ã                | use_count   | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π           |
+-------------------------------+--------------------------+-------------+-----------------------+
|  üñºÔ∏è HouseSceneTexture üå§Ô∏èüè†    | üî∑ square + üü£ ellipse   | 2           | —Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ –≤–ª–∞–¥–µ–Ω–∏–µ   |
|  GreenFillTexture üü©          | ‚Äî                        | 0           | —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞            |
+-------------------------------+--------------------------+-------------+-----------------------+

üîπ –®–ê–ì 6: üî∑ square.ResetTexture()
üéØ –û–ñ–ò–î–ê–ï–ú: üñºÔ∏è HouseSceneTexture üå§Ô∏èüè† –ù–ï —É–º—Ä—ë—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –µ—ë –¥–µ—Ä–∂–∏—Ç üü£.
--------------------------------------------------------------------------
üî∑ Shape#1 (square) üßπ ResetTexture() -> reset()
   üîé
   –î–û reset –ø–æ–ª–µ texture_: get()=0x1d59a3d7dd0  name="üñºÔ∏è HouseSceneTexture üå§Ô∏èüè† [—Å–æ–¥–µ—Ä–∂–∏—Ç –∏ –Ω–µ–±–æ, –∏ —Å–æ–ª–Ω—Ü–µ, –∏ –¥–æ–º, –∏ —Ç—Ä–∞–≤—É]"  use_count=2
   üîé
   –ü–û–°–õ–ï reset –ø–æ–ª–µ texture_: nullptr (use_count=0)
üìå –ü–û–Ø–°–ù–ï–ù–ò–ï: –ø–æ—Å–ª–µ ResetTexture() —É üî∑ square –±–æ–ª—å—à–µ –Ω–µ—Ç –≤–ª–∞–¥–µ–Ω–∏—è.
   HouseSceneTexture –æ—Å—Ç–∞—ë—Ç—Å—è –∂–∏—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ üü£ ellipse –≤—Å—ë –µ—â—ë –≤–ª–∞–¥–µ–ª–µ—Ü (use_count=1).

üìä –ü–æ—Å–ª–µ square.ResetTexture()
+-------------------------------+--------------+-------------+----------------+
| Texture                       | –í–ª–∞–¥–µ–ª—å—Ü—ã    | use_count   | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π    |
+-------------------------------+--------------+-------------+----------------+
|  üñºÔ∏è HouseSceneTexture üå§Ô∏èüè†    | üü£ ellipse   | 1           | –≤—Å—ë –µ—â—ë –∂–∏–≤–∞   |
+-------------------------------+--------------+-------------+----------------+

üîπ –®–ê–ì 7: üü£ ellipse.ResetTexture() (–ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–ª–∞–¥–µ–ª–µ—Ü)
üéØ –û–ñ–ò–î–ê–ï–ú: üñºÔ∏è HouseSceneTexture üå§Ô∏èüè† —É–º—Ä—ë—Ç –∑–¥–µ—Å—å.
--------------------------------------------------------------------------
üü£ Shape#2 (ellipse) üßπ ResetTexture() -> reset()
   üîé
   –î–û reset –ø–æ–ª–µ texture_: get()=0x1d59a3d7dd0  name="üñºÔ∏è HouseSceneTexture üå§Ô∏èüè† [—Å–æ–¥–µ—Ä–∂–∏—Ç –∏ –Ω–µ–±–æ, –∏ —Å–æ–ª–Ω—Ü–µ, –∏ –¥–æ–º, –∏ —Ç—Ä–∞–≤—É]"  use_count=1
üß±üí• Texture üñºÔ∏è HouseSceneTexture üå§Ô∏èüè† [—Å–æ–¥–µ—Ä–∂–∏—Ç –∏ –Ω–µ–±–æ, –∏ —Å–æ–ª–Ω—Ü–µ, –∏ –¥–æ–º, –∏ —Ç—Ä–∞–≤—É] destroyed  (this=0x1d59a3d7dd0)
   üîé
   –ü–û–°–õ–ï reset –ø–æ–ª–µ texture_: nullptr (use_count=0)
üìå –ü–û–Ø–°–ù–ï–ù–ò–ï: –ø–æ—Å–ª–µ ResetTexture() —É üü£ ellipse –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å.
   use_count —Å—Ç–∞–ª 0 => shared_ptr —É–¥–∞–ª–∏–ª –æ–±—ä–µ–∫—Ç => üí• dtor Texture.

üìä –ü–æ—Å–ª–µ ellipse.ResetTexture()
+-------------------------------+-------------+-------------+---------------+
| Texture                       | –í–ª–∞–¥–µ–ª—å—Ü—ã   | use_count   | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π   |
+-------------------------------+-------------+-------------+---------------+
|  üñºÔ∏è HouseSceneTexture üå§Ô∏èüè†    | ‚Äî           | 0           | —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞    |
+-------------------------------+-------------+-------------+---------------+

üßæ –õ–ï–ì–ï–ù–î–ê (—á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∫–∞–∂–¥–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞):
  üñºÔ∏è HouseSceneTexture üå§Ô∏èüè†  = –∫–∞—Ä—Ç–∏–Ω–∫–∞-—Å—Ü–µ–Ω–∞ (–Ω–µ–±–æ + —Å–æ–ª–Ω—Ü–µ + –¥–æ–º + —Ç—Ä–∞–≤–∞)
  GreenFillTexture üü©        = –∑–µ–ª—ë–Ω–∞—è –∑–∞–ª–∏–≤–∫–∞: —Å–∏–º–≤–æ–ª 'G' –Ω–∞ –∫–∞–∂–¥–æ–º –ø–∏–∫—Å–µ–ª–µ
  BlueUnusedTexture üü¶       = —Å–∏–Ω—è—è —Ç–µ–∫—Å—Ç—É—Ä–∞, —Å–æ–∑–¥–∞–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ, —á—Ç–æ–±—ã —É–º–µ—Ä–µ—Ç—å –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –±–ª–æ–∫–∞

=========================================================================
üé® –ì–†–ê–§–ò–ö–ê (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ) ‚Äî –∫–≤–∞–¥—Ä–∞—Ç+–æ–≤–∞–ª + SOURCE (–∫—Ä–∞—Å–Ω—ã–µ –ø—É–Ω–∫—Ç–∏—Ä—ã)
=========================================================================



üìå –í–ê–ñ–ù–û: –≥—Ä–∞—Ñ–∏–∫–∞ –ù–ï —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏.
   –°–µ–π—á–∞—Å —Å–æ–∑–¥–∞–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–µ–∫—Å—Ç—É—Ä—É üñºÔ∏è CanvasHouseScene üé® –∏ –Ω–∞—Ä–∏—Å—É–µ–º 2 —Ñ–∏–≥—É—Ä—ã.
--------------------------------------------------------------------------
üß±‚úÖ Texture üñºÔ∏è CanvasHouseScene üé® [–∫–≤–∞–¥—Ä–∞—Ç+–æ–≤–∞–ª –Ω–∞ –∫–∞–Ω–≤–∞—Å–µ + source —Å –∫—Ä–∞—Å–Ω—ã–º–∏ –ø—É–Ω–∫—Ç–∏—Ä–∞–º–∏] created  (this=0x1d59a3d9370, size=40x20)
üî∑/üü£‚úÖ Shape 'üî∑ CANVAS-Square' created (this=0x1d59a3d7dc0)
--------------------------------------------------------------------------
üß© CANVAS: üî∑ square.SetTexture(canvasHouse)
üéØ –û–ñ–ò–î–ê–ï–ú: –≤–Ω—É—Ç—Ä–∏ SetTexture() use_count –≤—Ä–µ–º–µ–Ω–Ω–æ —Å—Ç–∞–Ω–µ—Ç 2 (–∫–æ–ø–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞)
   üîé [–¥–æ square.SetTexture] canvasHouse.get()=0x1d59a3d9370 use_count=1
--------------------------------------------------------------------------
   [–í–ù–£–¢–†–ò] üî∑ CANVAS-Square tex.get()=0x1d59a3d9370 use_count=2 name="üñºÔ∏è CanvasHouseScene üé® [–∫–≤–∞–¥—Ä–∞—Ç+–æ–≤–∞–ª –Ω–∞ –∫–∞–Ω–≤–∞—Å–µ + source —Å –∫—Ä–∞—Å–Ω—ã–º–∏ –ø—É–Ω–∫—Ç–∏—Ä–∞–º–∏]"
--------------------------------------------------------------------------
   üîé [–ø–æ—Å–ª–µ square.SetTexture] canvasHouse.get()=0x1d59a3d9370 use_count=2
‚úÖ –ü–û–õ–£–ß–ò–õ–ò: —Ç–µ–ø–µ—Ä—å –≤–ª–∞–¥–µ–ª—å—Ü—ã = canvasHouse + üî∑ square (use_count –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 2)
--------------------------------------------------------------------------
üî∑/üü£‚úÖ Shape 'üü£ CANVAS-Ellipse' created (this=0x1d59a3d7e40)
--------------------------------------------------------------------------
üß© CANVAS: üü£ ellipse.SetTexture(canvasHouse)
üéØ –û–ñ–ò–î–ê–ï–ú: –≤ —Å—Ç—Ä–æ–∫–µ [–í–ù–£–¢–†–ò –§–£–ù–ö–¶–ò–ò] (–≤ SetTexture) use_count —Å—Ç–∞–Ω–µ—Ç 3
           –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä tex ‚Äî –ö–û–ü–ò–Ø shared_ptr (–ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é)
           (–≤–ª–∞–¥–µ–ª—å—Ü—ã —É–∂–µ: canvasHouse + üî∑ square, –ø–ª—é—Å –∫–æ–ø–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞)
   üîé [–¥–æ ellipse.SetTexture] canvasHouse.get()=0x1d59a3d9370 use_count=2
üìå –î–û –≤—ã–∑–æ–≤–∞ (–≤ main) use_count=2 ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ;
   –∑–Ω–∞—á–µ–Ω–∏–µ 3 –≤–∏–¥–Ω–æ –≤ —Å—Ç—Ä–æ–∫–µ [–í–ù–£–¢–†–ò –§–£–ù–ö–¶–ò–ò] –≤–Ω—É—Ç—Ä–∏ SetTexture()
--------------------------------------------------------------------------
   [–í–ù–£–¢–†–ò] üü£ CANVAS-Ellipse tex.get()=0x1d59a3d9370 use_count=3 name="üñºÔ∏è CanvasHouseScene üé® [–∫–≤–∞–¥—Ä–∞—Ç+–æ–≤–∞–ª –Ω–∞ –∫–∞–Ω–≤–∞—Å–µ + source —Å –∫—Ä–∞—Å–Ω—ã–º–∏ –ø—É–Ω–∫—Ç–∏—Ä–∞–º–∏]"
--------------------------------------------------------------------------
   üîé [–ø–æ—Å–ª–µ ellipse.SetTexture] canvasHouse.get()=0x1d59a3d9370 use_count=3
‚úÖ –ü–û–õ–£–ß–ò–õ–ò: —Ç–µ–ø–µ—Ä—å –≤–ª–∞–¥–µ–ª—å—Ü—ã = canvasHouse + üî∑ square + üü£ ellipse (use_count –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 3)
--------------------------------------------------------------------------
üìå –°–µ–π—á–∞—Å —É canvasHouse –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤: 3 (canvasHouse + üî∑ square + üü£ ellipse)
üìå –ê–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞ Texture (canvasHouse.get()) = 0x1d59a3d9370

=== CANVAS ===

=========================================================================
üî¥ TEXTURE SOURCE (–æ—Ç–∫—É–¥–∞ –≤–∑—è—Ç—ã üî∑ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ –∏ üü£ –æ–≤–∞–ª)
=========================================================================

=== TEXTURE (with margins) + RED MARKS ===

‚úÖ END: –∫–æ–≥–¥–∞ canvasHouse –∏ —Ñ–∏–≥—É—Ä—ã –∫–∞–Ω–≤–∞—Å–∞ –≤—ã–π–¥—É—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ -> CanvasHouseScene üé® —É–Ω–∏—á—Ç–æ–∂–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
üî∑/üü£üíÄ Shape 'üî∑ CANVAS-Square' destroyed (this=0x1d59a3d7dc0)
üî∑/üü£üíÄ Shape 'üü£ CANVAS-Ellipse' destroyed (this=0x1d59a3d7e40)
üß±üí• Texture üñºÔ∏è CanvasHouseScene üé® [–∫–≤–∞–¥—Ä–∞—Ç+–æ–≤–∞–ª –Ω–∞ –∫–∞–Ω–≤–∞—Å–µ + source —Å –∫—Ä–∞—Å–Ω—ã–º–∏ –ø—É–Ω–∫—Ç–∏—Ä–∞–º–∏] destroyed  (this=0x1d59a3d9370)
üî∑/üü£üíÄ Shape 'üü£ Shape#2 (ellipse)' destroyed (this=0x3b433ff740)
üî∑/üü£üíÄ Shape 'üî∑ Shape#1 (square)' destroyed (this=0x3b433ff6f0)

C:\...\–£–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏\–£–º–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å shared_ptr\shared_ptr_lesson>
````

---

## üß† –î–∏–∞–≥—Ä–∞–º–º—ã –≤–ª–∞–¥–µ–Ω–∏—è (–∫–æ—Ä–æ—Ç–∫–æ)

### –®–ê–ì 3

```
houseScene ‚Üí HouseSceneTexture ‚Üê square
greenFill  ‚Üí GreenFillTexture  ‚Üê ellipse
```

### –®–ê–ì 5

```
square ‚Üí HouseSceneTexture ‚Üê ellipse
(GreenFillTexture —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞)
```

### CANVAS

```
canvasHouse
     ‚îÇ
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CanvasHouseScene üé® ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚ñ≤            ‚ñ≤
     ‚îÇ            ‚îÇ
CANVAS-Square  CANVAS-Ellipse
```

---

## üé® –ì—Ä–∞—Ñ–∏–∫–∞: CANVAS (—Å–∫—Ä–∏–Ω—à–æ—Ç)

> –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –≤—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏ ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–∞–∫:

* `images/canvas.png`
* `images/source.png`

–ò –¥–æ–±–∞–≤—å:

```md
## üé® –ì—Ä–∞—Ñ–∏–∫–∞: CANVAS
![CANVAS](images/canvas.png)

## üî¥ Texture Source (—Ä–∞–º–∫–∏)
![SOURCE](images/source.png)
```

